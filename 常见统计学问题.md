# 数据分析面试核心知识总结（速背版）

---

## 1. 假设检验及步骤

**理解：**  
假设检验是“先假定，再用数据试图推翻”的统计推断方法。本质是用样本对总体结论做判断。

**步骤：**  
1. 提出假设  
   - H₀：原假设（默认无差异）  
   - H₁：备择假设（存在差异）
2. 选择统计量（t、z、χ²、F）
3. 设定显著性水平 α（如 0.05）
4. 计算统计量与 p 值
5. 根据 p 值决定是否拒绝 H₀  
   - p < α → 拒绝H₀  
   - p ≥ α → 不能拒绝H₀

---

## 2. p 值（p-value）

**定义：**  
在 **H₀ 为真** 的前提下，观察到样本统计量“至少这么极端”的概率。  
当原假设为真的条件下，获得当前或更极端统计结果的概率，p值越小，表示数据与原假设的矛盾程度越大，通常p值小于显著性水平（如0.05）时，我们拒绝原假设

**理解：**  
p 值越小 → 越不支持 H₀。

**误区：**  
- p 值不是“假设为真的概率”。  
- p 值不代表效果大小。

---

## 3. 置信度与置信区间

**置信度（Confidence Level）**：例如95%，表示重复无数次实验构建的区间中，有95%的区间包含总体真实参数。

**置信区间（Confidence Interval）**：用区间估计总体参数，更能反映不确定性。

**注意：**  
“真实值在区间中概率是95%”是错误的。 只能说我们有95%的信心，区间包含总体真实参数。
正确是：区间是随机的，真实值固定。

---

## 4. 中心极限定理（CLT）

**核心结论：**  
无论总体分布如何，只要样本量足够大（n ≥ 30），样本均值近似服从正态分布。

**重要性：**  
- 是 z 检验、t 检验、置信区间、A/B测试的理论基础。

---

## 5. 两类错误

| 错误类型 | 定义 | 类比 |
|---------|------|------|
| I 类错误（Type I） | 错误拒绝 H₀，实际上没有差异 → 判错好人 | 冤枉好人 |
| II 类错误（Type II） | 未拒绝 H₀，实际上有差异 → 放过坏人 | 放过坏人 |

**功效（Power） = 1 - β**  
提高 Power 的方法：增大样本量、降低噪声、增强效应量。

---

## 6. 常见假设检验类型（通俗解释 + 案例版）

这里重点放在 **什么时候用什么检验、为什么用、案例是什么**。

---

### 6.1 t 检验 — 小样本、未知总体方差

> 心法：**样本不大、总体方差不知道，就用 t 检验。**  
> 场景都是“比较均值有没有差别”。

#### ① 单样本 t 检验  
**案例：**  
你们产品的平均打开率行业标准是 20%，现在抽了 30 天的数据发现平均 22%，想判断是不是“真的比20%高”。

公式：样本均值 vs 某个固定值（20%）。

#### ② 配对 t 检验（before vs after）  
**案例：**  
同一批用户，在新页面改版前后转化率是否提升？  
因为是同一批用户对应两个时间点 → “成对数据”。

#### ③ 独立样本 t 检验（A 组 vs B 组）  
**案例：**  
A/B测试：新按钮（B 组）是否比旧按钮（A组）点击率更高？  
两组用户互不重叠 → “独立样本”。

**总结：**  
- 单样本：我 vs 标准值  
- 配对样本：同一个人前后两次  
- 独立样本：A组人与B组人比较  

---

### 6.2 z 检验 — 大样本 or 已知方差

> 心法：**样本足够大（>30），均值自动近似正态 → 用 z 更方便。**

**案例：**  
平台每天用户量几十万，你想比较今天与昨天平均“下单金额”是否有显著差异。  
样本巨大 → 用 z 检验更合适。

**和 t 的差别：**  
- 本质一样，只是 z 不需要估总体方差。  
- 大样本时，t 值会趋近 z 值，两者几乎一样。

---

### 6.3 F 检验 — 比方差/整体显著性（ANOVA & 回归）

#### ① ANOVA（方差分析）：多个组的均值是否有差别  
> 心法：**超过两组（如 A/B/C/D）要比较均值差异 → 用 F 检验。**

**案例：**  
试了 3 个优惠券策略（A/B/C），想知道“至少两个策略之间的消费金额均值有差别”。

- 两组用 t  
- 多组用 F

#### ② 回归中的总体显著性检验  
**案例：**  
你做一个回归预测 GMV，想知道“整体模型是否有解释力”。  
F 检验帮你判断：所有特征加在一起是否显著影响 Y。

---

### 6.4 卡方检验（χ²）— 检验分类变量是否相关

> 心法：**频数类、分类类数据 → 卡方检验。**  
> 用来判断“两个分类变量是否有关”。

#### ① 独立性检验  
**案例：**  
性别（男/女）是否影响是否购买（买/不买）？  
构建 2x2 频数表，用卡方验证“买不买”和性别是否独立”。

#### ② 拟合优度  
**案例：**  
你预计某游戏玩家职业分布：战士30%、法师40%、弓手30%。  
实际收集到一批玩家数据，看是否与“期望分布”一致。

---

### 一句话总结（面试最常用）

- **t**：比均值（小样本）  
- **z**：比均值（大样本/已知方差）  
- **F**：多组均值 / 回归整体  
- **卡方**：分类变量是否有关  

记口诀：  
**“均值看 t/z，方差看 F，分类看卡方。”**

---

## 7. 辛普森悖论（Simpson’s Paradox）

> **整体趋势和分组趋势相反** → 说明数据里隐藏了“混杂变量”。

### 最经典案例：大学录取率

假设：

| 性别 | 总体录取率 |
|-----|-----------|
| 男生 | 60% |
| 女生 | 40% |

看起来像女生遭到不公平对待。  
但分学院后发现：

| 学院 | 男录取率 | 女录取率 |
|-----|----------|----------|
| 工学院（难） | 30% | 35% |
| 文学院（容易） | 80% | 85% |

每个学院中：**女生录取率都更高**。  
为什么总体反而更低？

因为：  
女申请者更多选择工学院（难进），男申请者更多选择文学院（好进）。  
→ **权重不同造成整体趋势被“掩盖”。**

### 再来一个业务场景案例（更贴近面试）

你做 APP 的 A/B 测试：

**总体数据：**
- A 版本转化率：10%  
- B 版本转化率：12%（看起来更好）

**按新老用户拆分后：**
- 新用户：A 15%，B 13%（A 更好）  
- 老用户：A 8%，B 7%（A 更好）

即——**分组后 A 组更好，但总体 B 更好**。

为什么？  
B 版本恰好被更多“高质量用户”使用（比如更多是高转化的核心老用户）。  
→ 形成辛普森悖论。

### 关键启示（面试最喜欢听）

1. **不要只看总体指标，必须按关键维度拆分（如新老、地域、渠道）**  
2. **回归、倾向得分匹配等方法可以控制混杂变量**  
3. **A/B 测试要保证随机性，避免分组不均**

---

# 总结句（可背诵）
假设检验是证伪思维；p 值看证据强弱；置信区间比单点估计更稳健；中心极限定理让均值近似正态；两类错误对应冤枉好人和放过坏人；t/z/F/卡方各有适用场景；辛普森悖论提醒我们控制混杂变量。
